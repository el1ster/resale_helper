# Аналіз взаємозалежностей коефіцієнтів (Математична модель EVS)

Цей документ містить критичний аналіз того, як різні фактори (фізичний стан, технічний стан, бренд, вік, комплектація, тощо) впливають один на одного. Просте перемноження коефіцієнтів ($P = Base \cdot K_1 \cdot K_2 \cdot ... \cdot K_n$) є недостатнім для точної оцінки, оскільки у реальному житті вага одного фактора часто залежить від значення іншого.

Нижче наведено пропоновані взаємозв'язки для імплементації у математичному рушії. Концепція полягає у переході від "Глобальних множників" до "Ефективних множників" ($K_{effective}$).

## 1. Базові крос-факторні залежності

### 1.1. Фізичний стан (K_phys) ↔ Технічний стан (K_tech)
**Логіка:** Якщо пристрій технічно несправний (K_tech = `broken` або `partial_defect`), його фізичний стан втрачає свою значущість. Ніхто не доплатить за "Ідеальний стан корпусу", якщо телефон не вмикається (він йде на запчастини).
**Пропозиція:**
- Якщо `K_tech < 0.5` (брухт/під ремонт), то $K_{phys\_effective} = 1.0$ (або застосовується мінімальний штраф, ігноруючи надбавки за "ідеал"). Тобто, ідеальний неробочий телефон коштує так само, як і подряпаний неробочий телефон.

### 1.2. Комплектація (K_comp) ↔ Вік (K_age)
**Логіка:** Наявність оригінальної коробки та чеку дуже важлива для нової техніки (до 1-2 років), оскільки це підтверджує легальність і спрощує перепродаж. Але для 7-річного ноутбука або 15-річної гітари відсутність рідної картонної коробки взагалі ніяк не впливає на ціну.
**Пропозиція:**
- Вага штрафу за неповну комплектацію (`partial` або `device_only`) повинна експоненційно зменшуватися з віком. 
- Наприклад, якщо вік > 50% від `lifespan`, то штраф за відсутність коробки ділиться на 2 (замість x0.80 стає x0.90). Якщо вік > 100% `lifespan`, штраф за комплектацію анулюється ($K_{comp} = 1.0$).

### 1.3. Гарантія (K_warn) ↔ Вік (K_age) (Логічний запобіжник)
**Логіка:** Користувач може помилитися і вказати вік "3 роки", але при цьому обрати "Дійсна офіційна гарантія" (що майже неможливо, крім окремих видів пам'яті/SSD).
**Пропозиція:**
- Якщо `age_months > 24` (більшість стандартних гарантій) і обрано `warn=valid`, рушій може програмно ігнорувати надбавку (зрізати з 1.10 до 1.0), вважаючи це залишками магазинної розширеної гарантії, яка не має великої цінності на вторинному ринку для старого товару.

### 1.4. Терміновість (K_urgent) ↔ Ліквідність бренду (K_brand)
**Логіка:** Товари популярних брендів продаються швидко навіть за середньою ціною. Але "Ноунейм" товари, навіть якщо їх поставити дешево (Швидкий продаж), можуть продаватися місяцями. Тому "Терміновий викуп" для неліквідного бренду означає продаж за копійки.
**Пропозиція:**
- Якщо `brand = budget` (ноунейм) ТА `urgent = fast/now`, штраф за терміновість має збільшуватися (наприклад, замість x0.70 ставати x0.55). Перекупники не хочуть брати неліквід.
- І навпаки, якщо `brand = apple/premium`, "Терміновий продаж" може бути м'якшим (x0.85 замість x0.70), бо ліквідність покриває ризики.

### 1.5. Комплектація (K_comp) ↔ Технічний стан (K_tech)
**Логіка:** Якщо пристрій продається на запчастини (`broken`), наявність коробки чи макулатури не має жодного сенсу для покупця (майстра з ремонту). Йому потрібен лише донор-пристрій.
**Пропозиція:**
- Якщо `K_tech = broken`, тоді $K_{comp\_effective} = 1.0$ (ігноруємо штраф за відсутність коробки).

### 1.6. Гарантія (K_warn) ↔ Технічний стан (K_tech)
**Логіка:** Наявність гарантії є плюсом, лише якщо пристрій робочий або має дрібний гарантійний дефект. Якщо користувач вказав стан `broken` (наприклад, розбитий екран смартфону або втоплений ноутбук), офіційна гарантія автоматично анулюється сервісним центром.
**Пропозиція:**
- Якщо `K_tech < 0.8` (є механічні пошкодження або часткова несправність з вини користувача) і вказана `warn=valid`, рушій ігнорує бонус за гарантію, встановлюючи $K_{warn\_effective} = 1.0$.

### 1.7. Фізичний стан (K_phys) ↔ Вік (K_age) (Премія за збереження)
**Логіка:** Якщо новому пристрою (1 місяць) поставити стан `perfect` (ідеальний) - це норма. Але якщо пристрою 5 років і він досі в ідеальному стані `perfect` (без подряпин), це свідчить про надзвичайно обережне використання (або колекційний екземпляр).
**Пропозиція:**
- Якщо `age_months > lifespan_months * 0.8` (товар старий) ТА `K_phys = perfect`, можна застосувати невелику "премію за збереження" до фінальної ціни (наприклад, множник x1.05 до $K_{phys}$), заохочуючи акуратних користувачів.

## Резюме для розробника (Висновки)
Послідовність розрахунку має бути чітко структурованою, щоб один фільтр накладався на інший:
1. $K_{tech\_eff} = F(K_{tech})$
2. $K_{phys\_eff} = F(K_{phys}, K_{tech\_eff}, Age)$
3. $K_{age\_eff} = F(Age, Lifespan, Brand, K_{phys\_eff})$
4. $K_{comp\_eff} = F(K_{comp}, Age, K_{tech\_eff})$
5. $K_{warn\_eff} = F(K_{warn}, Age, K_{tech\_eff})$
6. $K_{urgent\_eff} = F(K_{urgent}, Brand)$
7. Фінальна ціна = $Base \cdot K_{age\_eff} \cdot K_{phys\_eff} \cdot K_{tech\_eff} \cdot K_{comp\_eff} \cdot K_{warn\_eff} \cdot K_{brand} \cdot K_{urgent\_eff}$

Ці правила дозволять створити максимально живу і стійку до людських помилок систему оцінки.

