# Архітектура математичного рушія: Експоненційне знецінення та крайові випадки

Цей документ описує оновлену математичну модель рушія EVS Bot, прийняту на Етапі 2. 

## 1. Проблема лінійної амортизації
Початково запропонована формула $K_{age}$ була лінійною. Це створювало критичну проблему: після завершення розрахункового строку служби (`lifespan`) вартість активу перетворювалась на нуль або навіть ставала від'ємною. У реальному світі навіть 20-річний робочий холодильник коштує грошей, як мінімум як металобрухт або тимчасове рішення.

## 2. Експоненційне знецінення (Exponential Decay)
Нова модель використовує експоненційну функцію. Вартість падає швидко у перші місяці/роки, але з часом падіння сповільнюється, наближаючись до асимптоти.

Формула: $K_{age} = (1 - d)^{age}$

Де $d$ — це місячний темп знецінення (decay rate). Ми розраховуємо $d$ динамічно для кожної категорії так, щоб при досягненні віку `lifespan_months`, коефіцієнт $K_{age}$ дорівнював `RESIDUAL_VALUE_FLOOR` (за замовчуванням 10% або 0.10).

$$ 1 - d = \exp \left( \frac{\ln(	ext{FLOOR})}{	ext{lifespan\_months}} 
ight) $$

**Перевага:** $K_{age}$ ніколи не опуститься нижче 10% (Floor), захищаючи базу розрахунку від обнулення.

## 3. Логіка "Підвалу цін" (Price Floor)
- **Нормальний стан:** Фінальна розрахункова ціна (навіть за наявності поганої комплектації чи відсутності бренду) не може бути нижчою за 10% від базової ціни (якщо вік великий).
- **Брухт (Broken):** Якщо користувач обирає технічний стан "Несправний / Під ремонт" ($K_{tech} < 0.5$), система знімає обмеження у 10% і дозволяє ціні впасти до 1% від базової. Це відображає реальну вартість неробочого старого пристрою.

## 4. New Old Stock (NOS) — "Вінтаж у плівці"
Унікальний крайовий випадок: пристрою 15 років, але він жодного разу не відкривався (заводське пакування).
Стандартна модель оцінила б його в 10% (як дуже старий товар), але для ринку колекціонерів це помилка.

**Рішення:**
Додано фізичний статус `sealed` (Новий, запакований) з множником 1.20.
Рушій перевіряє дві умови:
1. $age\_months \ge lifespan\_months 	imes 1.5$ (Товар класифікується як "вінтаж / ретро").
2. $phys\_code == "sealed"$ (Товар запечатаний).

Якщо обидві умови виконуються, рушій **ігнорує звичайне старіння** і фіксує $K_{age}$ на рівні $0.8$ замість $0.1$. Завдяки множнику `sealed` (1.2) та `perfect` $K_{tech}$ (1.0), фінальна ціна залишається надзвичайно високою, відображаючи колекційну цінність.
